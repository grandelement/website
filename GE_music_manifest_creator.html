<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>GE Music Manifest Creator</title>
<style>
  html,body{margin:0;background:#0b0e14;color:#eaf4ff;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{max-width:920px;margin:0 auto;padding:18px}
  h1{margin:0 0 10px 0;font-size:20px}
  p{margin:6px 0 14px 0;opacity:.9;line-height:1.35}
  .card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:14px;margin:12px 0}
  label{display:block;font-weight:700;margin:10px 0 6px 0}
  input,textarea,button{width:100%;box-sizing:border-box}
  input,textarea{background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.16);border-radius:12px;color:#fff;padding:10px 12px;font-size:14px}
  textarea{min-height:240px;resize:vertical}
  .row{display:flex;gap:10px;flex-wrap:wrap}
  .row > *{flex:1 1 220px}
  button{appearance:none;border:1px solid rgba(140,180,255,.35);background:rgba(10,20,40,.55);color:#eaf4ff;padding:12px;border-radius:12px;font-weight:800}
  button:active{transform:scale(.99)}
  .small{font-size:12px;opacity:.85}
  .ok{color:#9cffb3}
  .bad{color:#ffb3b3}
</style>
</head>
<body>
<div class="wrap">
  <h1>Music Manifest Creator (Website 8)</h1>
  <p>This creates <b>music-manifest.json</b> for your site. Paste your song URLs (one per line). Keep them absolute from the website root, like:<br>
  <span class="small">/website/ge-music/music/Grand Element 2005 Fundamental Groove/.../track.mp3</span></p>

  <div class="card">
    <label>Manifest Name (shows in browser/PWA)</label>
    <input id="name" value="music manifest">

    <label>Song URLs (one per line)</label>
    <textarea id="list" placeholder="/website/ge-music/music/.../song1.mp3&#10;/website/ge-music/music/.../song2.mp3"></textarea>

    <div class="row" style="margin-top:10px">
      <button id="build">Build music-manifest.json</button>
      <button id="copy">Copy JSON to clipboard</button>
    </div>

    <div id="msg" class="small" style="margin-top:10px"></div>
  </div>

  <div class="card">
    <label>Output JSON</label>
    <textarea id="out" readonly></textarea>
    <p class="small">Upload the downloaded file to: <b>/website/music-manifest.json</b></p>
  </div>
</div>

<script>
function normalizeLines(text){
  return text.split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
}

function buildJson(){
  const name = (document.getElementById("name").value || "music manifest").trim();
  const tracks = normalizeLines(document.getElementById("list").value).map(url => ({ url }));
  const payload = {
    name,
    generated_at: new Date().toISOString(),
    tracks
  };
  return JSON.stringify(payload, null, 2);
}

document.getElementById("build").addEventListener("click", () => {
  const lines = normalizeLines(document.getElementById("list").value);
  const msg = document.getElementById("msg");
  if (!lines.length){
    msg.innerHTML = '<span class="bad">No URLs pasted.</span>';
    return;
  }
  const json = buildJson();
  document.getElementById("out").value = json;

  // Download
  const blob = new Blob([json], {type:"application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "music-manifest.json";
  a.click();
  URL.revokeObjectURL(a.href);

  msg.innerHTML = '<span class="ok">Downloaded music-manifest.json</span> â€” upload it to /website/music-manifest.json';
});

document.getElementById("copy").addEventListener("click", async () => {
  const json = document.getElementById("out").value || buildJson();
  document.getElementById("out").value = json;
  try {
    await navigator.clipboard.writeText(json);
    document.getElementById("msg").innerHTML = '<span class="ok">Copied JSON to clipboard.</span>';
  } catch {
    document.getElementById("msg").innerHTML = '<span class="bad">Clipboard blocked.</span> Use the downloaded file instead.';
  }
});
</script>
</body>
</html>
