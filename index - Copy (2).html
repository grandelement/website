<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Grand Element ‚Äî Universe</title>
<style>
  :root{
    --hud-bg: rgba(12,20,35,.85);
    --line: rgba(200,220,255,.35);
    --glow: rgba(160,210,255,.45);
    --text: #cfe9ff;
  }
  html,body{height:100%;margin:0;background:#000;color:var(--text);font:14px/1.45 system-ui,Segoe UI,Roboto,Arial,sans-serif}
  body{
    overflow:hidden;
    background:#000 url("./images/GE stars.jpg") center/cover no-repeat fixed; /* cover so no stretching */
  }
  /* layers */
  #fx{position:fixed;inset:0;z-index:1}
  #phrases{position:fixed;inset:0;z-index:2;pointer-events:none}
  #planets{position:fixed;inset:0;z-index:4}
  /* sun + moon */
  #sunWrap{position:fixed;left:16vw;top:62vh;transform:translate(-50%,-50%);z-index:5;width:280px;height:280px}
  #sun{position:absolute;inset:0;border-radius:50%;background:center/cover no-repeat url("./images/ge-logo-2.jpg");
       box-shadow:inset 0 0 60px rgba(255,255,255,.12)}
  .sunOverlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;pointer-events:none}
  .about{margin-top:10%;font-weight:900;letter-spacing:.22em;font-size:13px;text-shadow:0 0 14px var(--glow)}
  #orbit{position:absolute;inset:0;transform-origin:50% 50%;z-index:2;pointer-events:none}
  #orbit .carrier{position:absolute;left:50%;top:50%}
  #moon{position:absolute;left:0;top:0;transform:translate(200px,-50%);width:110px;height:110px;border-radius:50%;
        cursor:pointer;pointer-events:auto;background:center/cover no-repeat url("./images/ge-radio-logo.png");
        box-shadow:0 0 10px 3px var(--glow)}
  #moon .label{position:absolute;left:50%;top:100%;transform:translate(-50%,10px);font-weight:700;font-size:12px;text-shadow:0 2px 6px #000}
  /* planet look */
  .planet{position:absolute;border-radius:50%;display:block;box-shadow:0 0 14px var(--glow);cursor:grab}
  .planet:active{cursor:grabbing}
  .planet.hover{transform:scale(1.2);transition:transform .12s}
  /* comets (comments) */
  .comet{position:absolute;width:10px;height:10px;border-radius:50%;background:#fff;box-shadow:0 0 8px 2px rgba(255,255,255,.6)}
  .tail{position:absolute;pointer-events:none;opacity:.65;filter:blur(1px)}
  /* player */
  #playerToggle{position:fixed;left:12px;bottom:12px;z-index:9;border:1px solid var(--line);padding:6px 10px;border-radius:999px;background:var(--hud-bg);cursor:pointer}
  #playerBox{position:fixed;left:12px;bottom:54px;z-index:9;display:none;background:rgba(10,20,35,.9);border:1px solid var(--line);
             border-radius:14px;padding:12px;backdrop-filter:blur(4px);min-width:300px}
  #playerBox.show{display:block}
  .row{display:flex;gap:8px;align-items:center;margin:8px 0}
  .btn{width:34px;height:34px;border-radius:8px;border:1px solid var(--line);display:grid;place-items:center;cursor:pointer;user-select:none}
  .toggle{border:1px solid var(--line);padding:4px 8px;border-radius:999px;cursor:pointer;user-select:none}
  .active{background:rgba(60,140,255,.35)}
  input[type="range"]{width:160px}
  #now{min-width:40px;text-align:center;font-variant-numeric:tabular-nums}
  /* HUD */
  #hud{position:fixed;right:10px;top:10px;z-index:9999;background:var(--hud-bg);border:1px solid var(--line);border-radius:10px;padding:8px 10px;font-size:12px}
  #hud .small{opacity:.85}
  /* ripple overlay */
  #ripple{position:fixed;inset:0;z-index:3;pointer-events:none}
  @media (max-width: 768px){
    #sunWrap{width:180px;height:180px;left:22vw;top:66vh}
    #moon{width:82px;height:82px;transform:translate(150px,-50%)}
  }
</style>
</head>
<body>
  <!-- canvases & layers -->
  <canvas id="fx"></canvas>
  <canvas id="ripple"></canvas>
  <div id="phrases"></div>
  <div id="planets"></div>

  <!-- sun + moon -->
  <div id="sunWrap">
    <div id="sun"><div class="sunOverlay"><div class="about" id="aboutBtn">ABOUT</div></div></div>
    <div id="orbit"><div class="carrier"><div id="moon" title="Grand Element Radio"><div class="label">GE RADIO</div></div></div></div>
  </div>

  <!-- player -->
  <button id="playerToggle">Music</button>
  <div id="playerBox">
    <div class="row" style="justify-content:space-between">
      <div id="trackTitle" style="font-weight:700;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">‚Äî</div>
      <div id="now">0:00</div>
    </div>
    <div class="row">
      <div class="btn" id="prev">‚èÆ</div>
      <div class="btn" id="play">‚ñ∂</div>
      <div class="btn" id="next">‚è≠</div>
      <input id="seek" type="range" min="0" max="100" value="0" />
    </div>
    <div class="row">
      <div class="toggle" id="tgShuffle">Shuffle</div>
      <div class="toggle" id="tgAlbum">Album</div>
      <span style="margin-left:auto">üîâ</span>
      <input id="vol" type="range" min="0" max="1" step="0.01" value="0.9" />
    </div>
    <audio id="audio" preload="auto" playsinline></audio>
  </div>

  <!-- HUD -->
  <div id="hud">
    <b>GE</b> <span class="small">Universe v3 ‚Ä¢ inline</span><br/>
    <span class="small" id="hudMsg">Booting‚Ä¶</span>
  </div>

<script>
/* =========================
   DATA: set your paths here
========================= */
const DATA = {
  aboutURL: "https://grandelement.com/about",
  backgrounds: [
    "images/GE stars.jpg",
    "images/stars_backgrounds/Grand Element - Fundamental Groove.jpg",
    "images/stars_backgrounds/Grand Element - Trio.jpg",
    "images/stars_backgrounds/Grand Element - Live.jpg",
    "images/stars_backgrounds/Grand Element - Sessions I.jpg",
    "images/stars_backgrounds/Grand Element - Sessions II.jpg",
    "images/stars_backgrounds/Grand Element - Intergy.jpg",
    "images/stars_backgrounds/Grand Element - Love.jpg",
    "images/stars_backgrounds/Grand Element - Soul.jpg",
    "images/stars_backgrounds/Grand Element - Spirit.jpg",
    "images/stars_backgrounds/Grand Element - Fire.jpg"
  ],
  // 10 album planets ‚Ä¢ x,y in viewport units; size in px (approx)
  planets: [
    {name:"FUNDAMENTAL GROOVE", x:18, y:88, r:55, url:"https://grandelement.bandcamp.com/album/fundamental-groove"},
    {name:"TRIO",               x:26, y:80, r:50, url:"https://grandelement.bandcamp.com/album/trio"},
    {name:"LIVE",               x:34, y:70, r:46, url:"https://grandelement.bandcamp.com/album/live"},
    {name:"SESSIONS I",         x:42, y:60, r:42, url:"https://grandelement.bandcamp.com/album/sessions-i"},
    {name:"SESSIONS II",        x:50, y:50, r:42, url:"https://grandelement.bandcamp.com/album/sessions-ii"},
    {name:"INTERGY",            x:58, y:40, r:38, url:"https://grandelement.bandcamp.com/album/intergy"},
    {name:"LOVE",               x:66, y:32, r:38, url:"https://grandelement.bandcamp.com/album/love"},
    {name:"SOUL",               x:74, y:24, r:34, url:"https://grandelement.bandcamp.com/album/soul"},
    {name:"SPIRIT",             x:82, y:16, r:34, url:"https://grandelement.bandcamp.com/album/spirit"},
    {name:"FIRE",               x:90, y:8,  r:30, url:"https://grandelement.bandcamp.com/album/fire"}
  ],
  // music list; use your radio/ paths
  tracks: [
    {title:"Fundamental Groove.Track 1", file:"radio/Fundamental Groove/01.mp3"},
    {title:"Trio.Track 1",              file:"radio/Trio/01.mp3"}
  ],
  orbitSeconds: 60,
  comets: 48,          // number of comments/comets
  ships: { tiny:100, small:40, large:10 }
};

/* ==============
   UTIL + BUS
=============== */
const HUD = (msg)=>document.getElementById('hudMsg').textContent = msg;
const bus = new EventTarget();
const send = (t,d)=>bus.dispatchEvent(new CustomEvent(t,{detail:d}));
const on = (t,fn)=>bus.addEventListener(t,e=>fn(e.detail));

/* =========================
   BACKGROUND + TELEPORT
========================= */
let bgIndex = 0;
function setBackground(url){
  // no stretching: cover + centered (CSS on body)
  document.body.style.backgroundImage = `url("${url}")`;
}
setBackground(DATA.backgrounds[0]||"images/GE stars.jpg");

// ripple canvas
const ripple = document.getElementById('ripple');
const rp = ripple.getContext('2d');
function teleportFrom(x,y){
  // 1) slow everything slightly
  send('slow-mode',{on:true});
  // 2) ripple expand ~2s
  const start = performance.now(), dur = 2000;
  function draw(now){
    const t = Math.min(1,(now-start)/dur);
    rp.clearRect(0,0,ripple.width,ripple.height);
    rp.save();
    rp.globalAlpha = 0.35*(1-t);
    rp.beginPath();
    const maxR = Math.hypot(innerWidth, innerHeight);
    rp.arc(x,y, maxR*t, 0, Math.PI*2);
    rp.lineWidth = 6*(1-t)+1;
    rp.strokeStyle = 'rgba(120,180,255,0.8)';
    rp.stroke();
    rp.restore();
    if(t<1) requestAnimationFrame(draw);
    else {
      rp.clearRect(0,0,ripple.width,ripple.height);
      // 3) change background
      bgIndex = (bgIndex+1) % DATA.backgrounds.length;
      setBackground(DATA.backgrounds[bgIndex]);
      // 4) resume
      send('slow-mode',{on:false});
    }
  }
  requestAnimationFrame(draw);
}

/* ==============
   RESIZE
=============== */
function fitCanvases(){
  for(const c of [document.getElementById('fx'), ripple]){
    c.width = innerWidth; c.height = innerHeight;
  }
}
addEventListener('resize', fitCanvases); fitCanvases();

/* =========================
   FX: STARS + SHIPS
========================= */
const fx = document.getElementById('fx'); const fd = fx.getContext('2d');
let stars=[], ships=[];
function initStars(){
  stars = Array.from({length:160},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,r:Math.random()*1.3+0.2,a:Math.random()}));
}
function spawnShips(){
  const spawn = (n,size,speed)=>Array.from({length:n},()=>({
    x:Math.random()*innerWidth, y:Math.random()*innerHeight, vx:(Math.random()-.5)*speed, vy:(Math.random()-.5)*speed, size
  }));
  ships = [
    ...spawn(DATA.ships.tiny, 1, 0.25),
    ...spawn(DATA.ships.small, 2.5, 0.18),
    ...spawn(DATA.ships.large, 6, 0.08) // motherships
  ];
}
initStars(); spawnShips();
let slowMode = false; on('slow-mode', ({on})=> slowMode = on);

function fxLoop(){
  // background field
  fd.clearRect(0,0,innerWidth,innerHeight);
  stars.forEach(s=>{
    s.a += (Math.random()*0.08-0.04);
    const alpha = 0.35 + 0.35*Math.sin(s.a);
    fd.globalAlpha = Math.max(0.05, Math.min(0.85, alpha));
    fd.beginPath(); fd.arc(s.x,s.y,s.r,0,Math.PI*2); fd.fillStyle='#cfe9ff'; fd.fill();
  });
  // ships
  fd.globalAlpha = 1;
  ships.forEach(sh=>{
    const k = slowMode ? 0.33 : 1;
    sh.x += sh.vx*k; sh.y += sh.vy*k;
    if(sh.x<-20) sh.x=innerWidth+20; if(sh.x>innerWidth+20) sh.x=-20;
    if(sh.y<-20) sh.y=innerHeight+20; if(sh.y>innerHeight+20) sh.y=-20;
    // draw
    fd.beginPath(); fd.arc(sh.x, sh.y, sh.size, 0, Math.PI*2);
    fd.fillStyle = (sh.size>=6?'#6fb8ff':'#bcd6ff'); fd.fill();
    // simple zap chance: entangle two nearby comets
    if(Math.random()<0.002 && sh.size>=6){ send('ship-scan',{x:sh.x,y:sh.y}); }
  });
  requestAnimationFrame(fxLoop);
}
fxLoop();

/* =========================
   COMETS (COMMENTS)
========================= */
const cometHost = document.getElementById('phrases');
const comets = [];
function spawnComets(){
  for(let i=0;i<DATA.comets;i++){
    const div = document.createElement('div'); div.className='comet';
    const size = i%10===0 ? 14 : (i%5===0?9:6);
    div.style.width = div.style.height = size+'px';
    cometHost.appendChild(div);
    comets.push({
      el:div, x:Math.random()*innerWidth, y:Math.random()*innerHeight, r:size/2,
      vx:(Math.random()-.5)*0.6, vy:(Math.random()-.5)*0.6, ent:null
    });
  }
}
spawnComets();

// tails
function drawTail(ctx, c){
  const len = 18 + c.r*4;
  ctx.beginPath();
  ctx.moveTo(c.x, c.y);
  ctx.lineTo(c.x - c.vx*len, c.y - c.vy*len);
  ctx.lineWidth = Math.max(1, c.r/2);
  ctx.strokeStyle = 'rgba(190,220,255,.55)';
  ctx.stroke();
}

// bounce vs circle (sun or moon)
function bounceOffCircle(c, cx, cy, cr){
  const dx = c.x - cx, dy = c.y - cy, dist = Math.hypot(dx,dy);
  if(dist < cr + c.r){
    // move out
    const nX = dx/dist, nY = dy/dist;
    c.x = cx + (cr + c.r + 0.5)*nX;
    c.y = cy + (cr + c.r + 0.5)*nY;
    // reflect velocity
    const dot = c.vx*nX + c.vy*nY;
    c.vx = c.vx - 2*dot*nX;
    c.vy = c.vy - 2*dot*nY;
  }
}

// entanglement: pair two nearest comets around a ship scan
on('ship-scan', ({x,y})=>{
  let A=null,B=null, best=1e9;
  for(const c1 of comets){
    const d1 = Math.hypot(c1.x-x, c1.y-y); if(d1>140) continue;
    for(const c2 of comets){
      if(c1===c2) continue;
      const d = Math.hypot(c1.x-c2.x, c1.y-c2.y);
      if(d<best && d<120){ best=d; A=c1; B=c2; }
    }
  }
  if(A && B){
    A.ent=B; B.ent=A;
    // slight sync push
    const ax = (B.x-A.x)*0.005, ay=(B.y-A.y)*0.005;
    A.vx += ax; A.vy += ay; B.vx -= ax; B.vy -= ay;
    setTimeout(()=>{ if(A.ent===B) A.ent=B.ent=null; }, 4000+Math.random()*4000);
  }
});

// comet loop (DOM + tail on FX canvas)
function cometsLoop(){
  fd.save();
  fd.globalCompositeOperation = 'lighter';
  comets.forEach(c=>{
    const k = slowMode? 0.5:1;
    c.x += c.vx*k; c.y += c.vy*k;
    // leave screen allowed: no frame walls (they can drift away)
    c.el.style.transform = `translate(${c.x - c.r}px, ${c.y - c.r}px)`;
    drawTail(fd, c);
    // entangled line
    if(c.ent){
      fd.beginPath(); fd.moveTo(c.x,c.y); fd.lineTo(c.ent.x,c.ent.y);
      fd.lineWidth = 1.5; fd.strokeStyle='rgba(100,180,255,.5)'; fd.stroke();
      // light mirroring
      c.vx = c.vx*0.98 + (c.ent.vx)*0.02; c.vy = c.vy*0.98 + (c.ent.vy)*0.02;
    }
    // bounce sun+moon
    const sun = document.getElementById('sun').getBoundingClientRect();
    const moon = document.getElementById('moon').getBoundingClientRect();
    const sunC = {x:sun.left+sun.width/2, y:sun.top+sun.height/2, r:sun.width/2};
    const moonC= {x:moon.left+moon.width/2,y:moon.top+moon.height/2,r:moon.width/2};
    bounceOffCircle(c, sunC.x, sunC.y, sunC.r);
    bounceOffCircle(c, moonC.x, moonC.y, moonC.r);
  });
  fd.restore();
  requestAnimationFrame(cometsLoop);
}
cometsLoop();

/* =========================
   PLANETS (POOL PHYSICS)
========================= */
const planetHost = document.getElementById('planets');
const planets = [];
DATA.planets.forEach((p,i)=>{
  const a = document.createElement('a'); a.className='planet';
  a.href = p.url; a.target='_blank'; a.title = p.name;
  const px = p.x/100*innerWidth, py = p.y/100*innerHeight;
  a.style.left = p.x+'vw'; a.style.top = p.y+'vh';
  a.style.width = a.style.height = (p.r*2)+'px';
  planetHost.appendChild(a);
  planets.push({el:a, x:px, y:py, r:p.r, vx:0, vy:0});
  // hover zoom
  a.addEventListener('mouseenter',()=>a.classList.add('hover'));
  a.addEventListener('mouseleave',()=>a.classList.remove('hover'));
  // drag / click logic
  let down=false, sx=0, sy=0, t0=0, startX=0, startY=0;
  a.addEventListener('pointerdown', e=>{
    down=true; a.setPointerCapture(e.pointerId);
    sx=e.clientX; sy=e.clientY; t0=performance.now();
    startX=planets[i].x; startY=planets[i].y;
  });
  a.addEventListener('pointermove', e=>{
    if(!down) return;
    const dx = e.clientX - sx, dy = e.clientY - sy;
    planets[i].x = startX + dx; planets[i].y = startY + dy;
    a.style.left = (planets[i].x/innerWidth*100)+'vw';
    a.style.top  = (planets[i].y/innerHeight*100)+'vh';
  });
  a.addEventListener('pointerup', e=>{
    a.releasePointerCapture(e.pointerId);
    const dt = Math.max(16, performance.now()-t0);
    const dx = planets[i].x - startX, dy = planets[i].y - startY;
    const dist = Math.hypot(dx,dy);
    // click (open link) if near-still
    if(dist<5 && dt<180){
      // Let default <a> open (new tab)
      send('teleport',{x:planets[i].x, y:planets[i].y}); // also trigger teleport FX
      return;
    }
    // fling velocity (pool cue)
    planets[i].vx = (dx/dt)*14; planets[i].vy = (dy/dt)*14;
    down=false;
  }, {passive:false});
});

// planet physics (edge bounce + damping + simple planet-planet collide)
function planetsLoop(){
  const loss=0.98, edgeLoss=0.85;
  for(let i=0;i<planets.length;i++){
    const p = planets[i];
    // integrate
    p.x += p.vx; p.y += p.vy;
    p.vx *= loss; p.vy *= loss;
    // bounds (pool table edges)
    if(p.x-p.r<0){ p.x=p.r; p.vx = -Math.abs(p.vx)*edgeLoss; }
    if(p.x+p.r>innerWidth){ p.x=innerWidth-p.r; p.vx = Math.abs(p.vx)*-edgeLoss; }
    if(p.y-p.r<0){ p.y=p.r; p.vy = -Math.abs(p.vy)*edgeLoss; }
    if(p.y+p.r>innerHeight){ p.y=innerHeight-p.r; p.vy = Math.abs(p.vy)*-edgeLoss; }
    // collisions (exchange velocities approx)
    for(let j=i+1;j<planets.length;j++){
      const q=planets[j]; const dx=q.x-p.x, dy=q.y-p.y, d=Math.hypot(dx,dy), R=p.r+q.r;
      if(d>0 && d<R){
        const nx=dx/d, ny=dy/d;
        const overlap = R - d;
        p.x -= nx*overlap/2; p.y -= ny*overlap/2;
        q.x += nx*overlap/2; q.y += ny*overlap/2;
        // swap normal components
        const pvn = p.vx*nx + p.vy*ny, qvn = q.vx*nx + q.vy*ny;
        const tmp = pvn; 
        p.vx += (qvn - pvn)*nx; p.vy += (qvn - pvn)*ny;
        q.vx += (tmp - qvn)*nx; q.vy += (tmp - qvn)*ny;
      }
    }
    // paint
    p.el.style.left = (p.x/innerWidth*100)+'vw';
    p.el.style.top  = (p.y/innerHeight*100)+'vh';
  }
  requestAnimationFrame(planetsLoop);
}
planetsLoop();

/* =========================
   MOON ORBIT (60s)
========================= */
const carrier = document.querySelector('#orbit .carrier');
const moon = document.getElementById('moon');
let orbitRun = true;
function orbitLoop(){
  if(orbitRun){
    const t = performance.now()/1000;
    const ang = -2*Math.PI*(t/DATA.orbitSeconds); // clockwise, start at 12
    carrier.style.transform = `rotate(${ang}rad)`;
    moon.style.transform = `translate(200px,-50%) rotate(${-ang}rad)`; // keep label upright
  }
  requestAnimationFrame(orbitLoop);
}
orbitLoop();
moon.addEventListener('mouseenter', ()=>orbitRun=false);
moon.addEventListener('mouseleave', ()=>orbitRun=true);

/* =========================
   TELEPORT trigger wiring
========================= */
on('teleport', ({x,y})=>{
  teleportFrom(x||innerWidth*0.5, y||innerHeight*0.5);
});
// also allow clicking a mothership to teleport
fx.addEventListener('click', e=>{
  // find a mothership near click
  const m = ships.find(s=>s.size>=6 && Math.hypot(s.x-e.clientX, s.y-e.clientY)<16);
  if(m){ teleportFrom(m.x, m.y); }
});
fx.addEventListener('mousemove', e=>{
  // hover around ships speeds/slows them
  ships.forEach(s=>{
    const d = Math.hypot(s.x-e.clientX, s.y-e.clientY);
    const accel = s.size>=6 ? 0.0008 : 0.0015;
    const dir = (d<60) ? -1 : 1;
    s.vx += (Math.random()-.5)*accel*dir;
    s.vy += (Math.random()-.5)*accel*dir;
  });
});

/* =========================
   PLAYER (expandable)
========================= */
const audio = document.getElementById('audio');
const btnPlay = document.getElementById('play');
const btnPrev = document.getElementById('prev');
const btnNext = document.getElementById('next');
const seek = document.getElementById('seek');
const vol = document.getElementById('vol');
const titleEl = document.getElementById('trackTitle');
const toggle = document.getElementById('playerToggle');
const box = document.getElementById('playerBox');
const tgShuffle = document.getElementById('tgShuffle');
const tgAlbum = document.getElementById('tgAlbum');
let iTrack = 0, shuffle=false, albumMode=false;

function loadTrack(i){
  if(!DATA.tracks.length) return;
  iTrack = (i+DATA.tracks.length)%DATA.tracks.length;
  const t = DATA.tracks[iTrack];
  titleEl.textContent = t.title || t.file || '‚Äî';
  audio.src = t.file || t.url || '';
  audio.play().catch(()=>{});
  btnPlay.textContent = '‚è∏';
}
btnPlay.onclick = ()=>{ if(audio.paused){ audio.play(); btnPlay.textContent='‚è∏'; } else { audio.pause(); btnPlay.textContent='‚ñ∂'; } };
btnPrev.onclick = ()=> loadTrack(iTrack-1);
btnNext.onclick = ()=> loadTrack(iTrack+1);
toggle.onclick = ()=> { box.classList.toggle('show'); orbitRun = !box.classList.contains('show'); };
vol.oninput = ()=> audio.volume = +vol.value;

audio.addEventListener('timeupdate', ()=>{
  if(!isFinite(audio.duration)) return;
  seek.value = (audio.currentTime/audio.duration*100)|0;
  const m = Math.floor(audio.currentTime/60), s=((audio.currentTime|0)%60).toString().padStart(2,'0');
  document.getElementById('now').textContent = `${m}:${s}`;
});
seek.oninput = ()=>{ if(isFinite(audio.duration)) audio.currentTime = (seek.value/100)*audio.duration; };
audio.addEventListener('ended', ()=>{
  if(shuffle){ loadTrack(Math.floor(Math.random()*DATA.tracks.length)); }
  else loadTrack(iTrack+1);
});
tgShuffle.onclick = ()=>{ shuffle=!shuffle; tgShuffle.classList.toggle('active', shuffle); };
tgAlbum.onclick   = ()=>{ albumMode=!albumMode; tgAlbum.classList.toggle('active', albumMode); };

loadTrack(0);

/* =========================
   ABOUT
========================= */
document.getElementById('aboutBtn').onclick = ()=> window.open(DATA.aboutURL,'_blank');

/* =========================
   HOUSEKEEPING
========================= */
function loops(){
  // keep ripple canvas size fresh
  ripple.width = innerWidth; ripple.height = innerHeight;
}
HUD('Ready. Drag planets to fling; click to teleport/open.');
</script>
</body>
</html>
